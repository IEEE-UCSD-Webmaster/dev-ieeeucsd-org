---
import Navbar from "../components/core/Navbar.astro";
import Footer from "../components/core/Footer.astro";
import InView from "../components/core/InView.astro";
import { initTheme } from "../scripts/database/initTheme";
---

<!doctype html>
<html lang="en" class="w-full h-full m-0 bg-ieee-black">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>IEEEUCSD</title>
        <script
            src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"
        ></script>
        <script is:inline>
            // Set a default theme until IndexedDB loads
            document.documentElement.setAttribute("data-theme", "dark");
        </script>
    </head>
    <InView />
    <body class="w-full h-full m-0 bg-ieee-black">
        <script>
            // Initialize theme from IndexedDB
            import { initTheme } from "../scripts/database/initTheme";
            initTheme().catch((err) =>
                console.error("Error initializing theme:", err)
            );
        </script>
        <div class="text-white min-h-screen">
            <header class="sticky top-0 w-full z-[999]">
                <Navbar />
            </header>
            <main class="w-[95%] mx-auto">
                <slot />
            </main>
            <Footer />
        </div>
    </body>
</html>
